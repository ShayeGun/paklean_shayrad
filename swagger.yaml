definition:
  openapi: 3.0.3
  info:
    title: shayrad the 110
    version: '1.0.0'
    description: police says wio wio bang bang ;)
  schemes:
    - http
    - https
  servers:
    - url: http://localhost:7890/api/shayrad/v1
  tags:
    - name: Licenses
      description: Everything about your driving license
    - name: Plates
      description: Everything about your license plate
    - name: violations
      description: Operations about user

  paths:
    /hello:
      get:
        summary: Send a text to the server
        description: Send a message to the server and get a response added to the original text.
        responses:
          '200':
            description: Success
            content:
              text/plain:
                schema:
                  type: string
                  example: 'hello baby ðŸ˜‰'
    /user/driving-licenses:
      post:
        tags:
          - Licenses
        summary: get all driving licenses
        description: get all user licenses
        requestBody:
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/requests/WithOtp'
                  - $ref: '#/components/requests/WithNoOtp'
        responses:
          '200':
            description: Success
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrivingLicense'
          '400':
            description: Failed
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CustomError'
    /user/driving-licenses/negative-points:
      post:
        tags:
          - Licenses
        summary: get negative points
        description: get users deriving licenses negative points
        requestBody:
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/requests/WithOtp'
                  - $ref: '#/components/requests/WithNoOtp'
        responses:
          '200':
            description: Success
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/NegativePoints'
          '400':
            description: Failed
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CustomError'
    /user/license-plates:
      post:
        tags:
          - Plates
        summary: get license plates
        description: get all users deriving license plates
        requestBody:
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/requests/WithOtp'
                  - $ref: '#/components/requests/WithNoOtp'
        responses:
          '200':
            description: Success
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/LicensePlate'
          '400':
            description: Failed
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CustomError'
    /user/license-plates/violations/report:
      post:
        tags:
          - Violations
        summary: get violations
        description: get all user's license plates violations separately + total
        requestBody:
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/requests/WithOtp'
                  - $ref: '#/components/requests/WithNoOtp'
        responses:
          '200':
            description: Success
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/LicensePlate'
          '400':
            description: Failed
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CustomError'
  components:
    requests:
      WithNoOtp:
        type: object
        properties:
          nationalCode:
            type: string
            required: true
            example: '0022553975'
          mobile:
            type: string
            required: true
            example: '09384009969'
      WithOtp:
        type: object
        properties:
          nationalCode:
            type: string
            required: true
            example: '0022553975'
          mobile:
            type: string
            required: true
            example: '09384009969'
          otp:
            type: string
            required: true
            example: '228897'
    schemas:
      DrivingLicense:
        type: array
        items:
          type: object
          properties:
            nationalCode:
              type: string
              example: '0022553975'
            title:
              type: string
              example: 'Ù¾Ø§ÛŒÙ‡ Ø³ÙˆÙ…'
            barcode:
              type: string
              example: '18776000317023405919'
            printNumber:
              type: string
              example: '9801955977'
            printDate:
              type: string
              example: '1398/12/03'
            validYears:
              type: string
              example: '10'
      NegativePoints:
        type: object
        properties:
          negativePoint:
            type: string
            example: '0'
          isDrivingAllowed:
            type: boolean
            example: true
      LicensePlate:
        type: array
        items:
          type: object
          properties:
            nationalCode:
              type: string
              example: '0083084304'
            serial:
              type: string
              example: '10100441445188'
            licensePlateNumber:
              type: string
              example: '400479696'
            description:
              type: string
              example: null
            separationDate:
              type: string
              example: null
            licensePlate:
              type: string
              example: 'Ø§ÛŒØ±Ø§Ù† Û´Û° - Û¶Û¹Û¶ Ø¬  Û·Û¹'
      CustomError:
        type: object
        properties:
          code:
            type: string
            required: true
            example: '431'
          status:
            type: string
            required: true
            example: 'fail'
          errMsg:
            type: string
            required: true
            example: 'needs an otp'

apis:
  - ./routes/*.ts
